<html>
  <head>
      <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script>
      var dashboardDate;
      var prevbutton = 'date_today';
      // alert (`select COUNT(A) where D = date '${dashboardDate}'`);

      let initialRange = new Date();
      let initialStartDateString = '';
      let initialEndDateString = '';

      initialRange.setDate(initialRange.getDate() - 1);
      initialEndDateString = initialRange.toISOString().slice(0,10);
      initialStartDateString = initialRange.toISOString().slice(0,10);

      function setDashboardDate(dateRange, div_id) {
        // alert(dateRange);

        document.getElementById(prevbutton).style.backgroundColor = 'white';
        document.getElementById(prevbutton).style.color = 'black';

        prevbutton = div_id;

        document.getElementById(div_id).style.backgroundColor = '#2eacde';
        document.getElementById(div_id).style.color = 'white';

        let selectedRange = new Date();
        let startDateString = '';
        let endDateString = '';

        switch(dateRange) {
          case 'dttoday':
                startDateString = selectedRange.toISOString().slice(0,10);
                endDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtthisweek':
                endDateString = selectedRange.toISOString().slice(0,10);
                selectedRange.setDate(selectedRange.getDate() - 7);
                startDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtthismonth':
                endDateString = selectedRange.toISOString().slice(0,10);
                selectedRange.setDate(selectedRange.getDate() - 30);
                startDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtcustomdates':
                showCustomDates();
                break;
          default:
        }
        
        // let dateString = selectedRange.toISOString().slice(0,10);
        // alert('values to be shown > ' + dateString);
        document.getElementById('selected_date_range').innerHTML = 'Data since "' + startDateString + '" until "' + endDateString + '"';
        google.charts.setOnLoadCallback(initialize(startDateString, endDateString));
      }

      function showCustomDates() {
        var x = document.getElementById("custom-dates");
        x.style.display = "flex";
        watchDateChange();
      }

      function hideCustomDates() {
        var x = document.getElementById("custom-dates");
        x.style.display = "none";

        document.getElementById('message_for_custom_date').innerHTML = '.';

        stopWatchingDateChange();
      }

      function watchDateChange() {
        document.getElementById("filter_start_date").addEventListener("change", dateListener);

        document.getElementById("filter_end_date").addEventListener("change", dateListener);
      }

      function dateListener() {
            var input = this.value;
            var dateEntered = new Date(input);
            // alert(input); //e.g. 2015-11-13
            // alert(dateEntered); //e.g. Fri Nov 13 2015 00:00:00 GMT+0000 (GMT Standard Time)

            if(input){
              document.getElementById('message_for_custom_date').innerHTML = '.';
            }
      }     

      function stopWatchingDateChange() {
        document.getElementById("filter_start_date").removeEventListener("change", dateListener);

        document.getElementById("filter_end_date").removeEventListener("change", dateListener);
      }

      function customDateSubmitted() {
        var filterStartDate = document.getElementById("filter_start_date").value;
        var filterEndDate = document.getElementById("filter_end_date").value;

        if (!(filterStartDate) || !(filterEndDate)) {
            document.getElementById('message_for_custom_date').innerHTML = "Please select Start and End dates!";
        } 
        else {
          document.getElementById('selected_date_range').innerHTML = 'Data since "' + filterStartDate + '" until "' + filterEndDate + '"';
        google.charts.setOnLoadCallback(initialize(filterStartDate, filterEndDate));        
        }
      }    

    // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart','table']});

      // document.getElementById("custom-dates").style.display = "none";

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(initialLoad);

      function initialLoad() {
        document.getElementById('selected_date_range').innerHTML = 'Data since "' + initialStartDateString + '" until "' + initialEndDateString + '"';
        initialize(initialStartDateString, initialEndDateString);
      }

      function initialize(startDate, endDate) {
        var opts = {sendMethod: 'auto'};
        // Replace the data source URL on next line with your data source URL.
        var lowrevenuequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? lowrevenuequery.setQuery(`select A, MIN(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MIN(E) limit 10`)
                            : lowrevenuequery.setQuery(`select A, MIN(E) where B >= date '${startDate}' group by A order by MIN(E) limit 10`))
                  : lowrevenuequery.setQuery('select A, MIN(E) group by A order by MIN(E) limit 10');

        // Send the query with a callback function.
        lowrevenuequery.send(handleQueryResponse);

        var toprevenuequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? toprevenuequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc limit 10`)
                            : toprevenuequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc limit 10`))
                  : toprevenuequery.setQuery('select A, MAX(E) group by A order by MAX(E) desc limit 10');

        // Send the query with a callback function.
        toprevenuequery.send(handleTopRevenueChart);

        var lowutilizationquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        startDate ? (endDate ? (lowutilizationquery.setQuery(`select A, MIN(C) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MIN(C) asc limit 10`))
                             : lowutilizationquery.setQuery(`select A, MIN(C) where B >= date '${startDate}' group by A order by MIN(C) asc limit 10`))
                  : lowutilizationquery.setQuery('select A, MIN(C) group by A order by MIN(C) asc limit 10');

        lowutilizationquery.send(handleLowtUtilizationChart);

        var crowdedroutequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? crowdedroutequery.setQuery(`select A, MAX(C) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(C) desc limit 10`)
                            : crowdedroutequery.setQuery(`select A, MAX(C) where B >= date '${startDate}' group by A order by MAX(C) desc limit 10`))
                  : crowdedroutequery.setQuery('select A, MAX(C) group by A order by MAX(C) desc limit 10');

        // Send the query with a callback function.
        crowdedroutequery.send(handleCrowdedRevenueChart);

        var tablequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        // startDate ? tablequery.setQuery(`select A,B,C,D,E where D > date '${startDate}'`): tablequery.setQuery('select A,B,C,D,E');
        startDate ? (endDate ? (tablequery.setQuery(`select A,B,C,D,E where B >= date '${startDate}' and B <= date '${endDate}'`))
                             : tablequery.setQuery(`select A,B,C,D,E where B >= date '${startDate}'`))
                  : tablequery.setQuery('select A,B,C,D,E');
        //tablequery.setQuery('select A,B,C,D,E');

        // Send the query with a callback function.
        tablequery.send(handleTableQueryResponse);

        // Replace the data source URL on next line with your data source URL.
        // var servicequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1hGAzIxgDo996ccpNUbZLdjStEbX5zQGl-9QrUQkIjew/edit?usp=sharing', opts);
        var servicequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);
        
        // startDate ? servicequery.setQuery(`select COUNT(A) where D > date '${startDate}'`) : servicequery.setQuery('select COUNT(A)');
        startDate ? (endDate ? servicequery.setQuery(`select A where B >= date '${startDate}' and B <= date '${endDate}'`)
                             : servicequery.setQuery(`select A where B >= date '${startDate}'`))
                  : servicequery.setQuery('select A');

        // Send the query with a callback function.
        servicequery.send(handleServiceQueryResponse);

        // Replace the data source URL on next line with your data source URL.
        // var passengerquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1hGAzIxgDo996ccpNUbZLdjStEbX5zQGl-9QrUQkIjew/edit?usp=sharing', opts);
        var passengerquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        // startDate ? passengerquery.setQuery(`select SUM(B) where D > date '${startDate}'`) : passengerquery.setQuery('select SUM(B)');
        startDate ? (endDate ? passengerquery.setQuery(`select SUM(C) where B >= date '${startDate}' and B <= date '${endDate}'`)
                             : passengerquery.setQuery(`select SUM(C) where B >= date '${startDate}'`))
                  : passengerquery.setQuery('select SUM(C)');

        // Send the query with a callback function.
        passengerquery.send(handlePassengerQueryResponse);

        var busyroutequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? busyroutequery.setQuery(`select A, MAX(C)  where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(C) desc`)
                             : busyroutequery.setQuery(`select A, MAX(C)  where B >= date '${startDate}' group by A order by MAX(C) desc`))
                  : busyroutequery.setQuery('select A, MAX(C) group by A order by MAX(C) desc');

        // Send the query with a callback function.
        busyroutequery.send(handleBusyRouteQueryResponse);

        var crowdedstopquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=StopView', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? crowdedstopquery.setQuery(`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc`)
                             : crowdedstopquery.setQuery(`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc`))
                  : crowdedstopquery.setQuery('select A, MAX(E) group by A order by MAX(E) desc');

        // Send the query with a callback function.
        crowdedstopquery.send(handleCrowdedStopQueryResponse);

        var revenueroutequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1', opts);

        // startDate ? busyroutequery.setQuery(`select A, MAX(B) where D > date '${startDate}' group by A`) : busyroutequery.setQuery('select A, MAX(B) group by A');
        startDate ? (endDate ? revenueroutequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc`)
                             : revenueroutequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc`))
                  : revenueroutequery.setQuery('select A, MAX(E) group by A order by MAX(E) desc');

        // Send the query with a callback function.
        revenueroutequery.send(handleRevenueRouteQueryResponse);

      }

      function numberWithCommas(x) {
        x=x.toString();
        var lastThree = x.substring(x.length-3);
        var otherNumbers = x.substring(0,x.length-3);
        if(otherNumbers != '')
            lastThree = ',' + lastThree;
        var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
        // let modx = x.toString().replace(/\B(?=(\d{3})+(?!\d))/, ",");
        // let modx = x.toString().replace(/(\d{3})$/, ",");
        return res;
      }

      function handleQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var options = {'title':'Bottom 10 Route Revenue per day',
                      //  'width':300,
                      //  'height':250,
                       'backgroundColor': '#fafafa'};

        var data = response.getDataTable();
        var column_chart = new google.visualization.ColumnChart(document.getElementById('column_chart_div'));

        column_chart.draw(data, options);

       }

function handleTopRevenueChart(response) {

      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

      var toprevenueoptions = {'title':'Top 10 Route Revenue per day',
                    // 'width':300,
                    // 'height':250,
                    'legend': 'left',
                    'backgroundColor': '#fafafa',
                    'pieHole': 0.9};

      var toprevenuedata = response.getDataTable();
      var toprevenuechart = new google.visualization.PieChart(document.getElementById('pie_chart_div'));

      toprevenuechart.draw(toprevenuedata, toprevenueoptions);
}

function handleCrowdedRevenueChart(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var revenuechartoptions = {'title':'Top 10 Crowded Routes per day',
                      // 'width':300,
                      // 'height':250,
                      'backgroundColor': '#fafafa'};

        var revenuechartdata = response.getDataTable();
        var line_chart = new google.visualization.ScatterChart(document.getElementById('scatter_chart_div'));

        line_chart.draw(revenuechartdata, revenuechartoptions);

}

function handleLowtUtilizationChart(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var lowutilizationoptions = {'title':'Bottom 10 Bus Utilization per day',
                      // 'width':300,
                      // 'height':250,
                      'backgroundColor': '#fafafa'};

        var lowutilizationdata = response.getDataTable();
        var bar_chart = new google.visualization.BarChart(document.getElementById('bar_chart_div'));

        bar_chart.draw(lowutilizationdata, lowutilizationoptions);
}


function handleTableQueryResponse(response) {
        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }

          var cssClassNames = {
              'headerRow': 'italic-darkblue-font large-font bold-font',
              'tableRow': '',
              'oddTableRow': 'beige-background',
              'selectedTableRow': 'orange-background large-font bold-font',
              'hoverTableRow': '',
              'headerCell': 'gold-border',
              'tableCell': 'center-text',
              'rowNumberCell': 'italic-purple-font',
              'justify': 'center',
          };

        // var table_options = {'title':'Bus Utilization',
        //               //  'width':1240,
        //               //  'height':220,
        //                'cssClassNames': cssClassNames,
        //                'showRowNumber': true,
        //                'allowHtml': true,
        //                };

        // var tabledata = response.getDataTable();

        // var table = new google.visualization.Table(document.getElementById('table_div'));

        // table.draw(tabledata, table_options);
      }

      function handleServiceQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var serviceoptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var servicedata = null;
        servicedata = response.getDataTable();
        
        try {
        // document.getElementById('routes_in_service').innerHTML = numberWithCommas(servicedata.getValue(0,0));
        document.getElementById('routes_in_service').innerHTML = numberWithCommas(servicedata.getDistinctValues(0).length);
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('routes_in_service').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('routes_in_service').innerHTML = 0;
          }
        }
      }

      function handlePassengerQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var passengeroptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var passengerdata = response.getDataTable();

        try {
          document.getElementById('total_passengers').innerHTML = numberWithCommas(passengerdata.getValue(0,0));
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('total_passengers').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('total_passengers').innerHTML = 0;
          }
        }
    }

      function handleCrowdedStopQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var crowdedstopoptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var crowdedstopdata = response.getDataTable();

        try {
          document.getElementById('most_crowded_stop').innerHTML = crowdedstopdata.getValue(0,0)
           + '<br><span style="font-size:1vw"}>(# passengers: ' + numberWithCommas(crowdedstopdata.getValue(0,1)) + ')</span>';
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_crowded_stop').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_crowded_stop').innerHTML = 0;
          }
        }
        
      }

      function handleBusyRouteQueryResponse(response) {

          if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
          }
          var busyrouteoptions = {'title':'Bus Utilization',
                        'width':250,
                        'height':200};

          var busyroutedata = response.getDataTable();

        try {
          document.getElementById('most_busy_route').innerHTML = busyroutedata.getValue(0,0);
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_busy_route').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_busy_route').innerHTML = 0;
          }
        }

      }

      function handleRevenueRouteQueryResponse(response) {

          if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
          }
          var revenuerouteoptions = {'title':'Bus Utilization',
                        'width':250,
                        'height':200};

          var revenueroutedata = response.getDataTable();

        try {
          document.getElementById('most_revenue_route').innerHTML = '&#8377;' + numberWithCommas(revenueroutedata.getValue(0,1))
           + '/-<br><span style="font-size:1vw"}>(Route #: ' + revenueroutedata.getValue(0,0) + ')</span>';
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_revenue_route').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_revenue_route').innerHTML = 0;
          }
        }

      }

</script>
<link rel="stylesheet" type="text/css" href="googlecharts.css"/>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
  <div class="main-container">
      <div class="navbar">
          <a href="#">HOME</a>
          <a href="#">STOP</a>
          <a href="#">ROUTE</a>
          <a href="rawdata.html">RAWDATA</a>
        </div>
      <div class="header-container">
            <p id="selected_date_range">Showing All Data</p>
            <div class="btn-group">
                <button id="date_today" class="date-button" onclick="setDashboardDate('dttoday','date_today')"><span>Today</span></button>
                <button id="date_thisweek" class="date-button" onclick="setDashboardDate('dtthisweek','date_thisweek')"><span>Past 7 Days</span></button>
                <button id="date_thismonth" class="date-button" onclick="setDashboardDate('dtthismonth','date_thismonth')"><span>Past 30 days</span></button>
                <button id="date_custom" class="date-button" onclick="setDashboardDate('dtcustomdates','date_custom')"><span>Custom Date Range</span></button>
                <div id="custom-dates" class="custom-dates-container" style="display: none">
                    <div class="date-labels"><Span>Start Date: </Span>
                      <Span>End Date: </Span>
                    </div>
                    <div class="start-end-dates">
                      <input id="filter_start_date" type="date">
                      <input id="filter_end_date" type="date">
                    </div>
                    <div class="submit-date">
                      <span class="date_selection_message" id="message_for_custom_date">.</span>
                      <input id="custom_date_button" type="submit" onclick="customDateSubmitted()" >
                    </div>
                </div>
            </div>

      </div>
      <!-- <div class="filters-container" id="filterscontainer">
          <p id="Filter_Title">Select Filters Below:</p>
              <button class="accordion">Date Range</button>
              <div class="panel">
                   <div class="btn-group">
                      <button id="date_today" class="date-button" onclick="setDashboardDate('dttoday','date_today')"><span>Today</span></button>
                      <button id="date_thisweek" class="date-button" onclick="setDashboardDate('dtthisweek','date_thisweek')"><span>Past 7 Days</span></button>
                      <button id="date_thismonth" class="date-button" onclick="setDashboardDate('dtthismonth','date_thismonth')"><span>Past 30 days</span></button>
                      <button id="date_custom" class="date-button" onclick="setDashboardDate('dtcustomdates','date_custom')"><span>Custom Date Range</span></button>
                  </div> 
                   <div id="custom-dates" class="custom-dates-container" style="display: none">
                    <div class="date-labels"><Span>Start Date: </Span>
                      <Span>End Date: </Span>
                      <span>.</span>
                    </div>
                    <div class="start-end-dates">
                      <input id="filter_start_date" type="date">
                      <input id="filter_end_date" type="date">
                      <input id="custom_date_button" type="submit" onclick="customDateSubmitted()" >
                    </div>
                  </div>
                  <span class="date_selection_message" id="message_for_custom_date"></span> 
              </div>
        </div>   -->
        <div class="dashboard-container">
            <div class="data-side-bar"></div>
            
        <div class = "data-container">
        <div class="highlights-container">
                  <div class="summary-card">
                    <div id="total_in_service_div">
                      <p id="routes_in_service_title">ROUTES IN SERVICE<br><br>
                        <span id="routes_in_service" class="summary_metric">calculating...</span></p>
                      <!-- <p id="routes_in_service">buses in service</p> -->
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(3, 88, 109); --summarytextcolor: white">
                    <div id="total_passengers_div">
                      <p id="total_passengers_title">TOTAL PASSENGERS<br><br>
                        <span id="total_passengers" class="summary_metric">calculating...</span></p>
                      <!-- <p id="total_passengers">Total Passengers</p> -->
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: greenyellow; --summarytextcolor: black">
                    <div id="most_revenue_route_div">
                      <p id="most_revenue_route_title">MOST REVENUE ROUTE<br><br>
                        <span id="most_revenue_route" class="summary_metric">calculating...</span></p><br><br>
                      <!-- <p id="most_busy_route">Most Busy Route</p> -->
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(124, 30, 93); --summarytextcolor: white">
                      <div id="most_busy_route_div">
                        <p id="most_busy_route_title">MOST BUSY ROUTE<br><br>
                          <span id="most_busy_route" class="summary_metric">calculating...</span></p><br><br>
                        <!-- <p id="most_busy_route">Most Busy Route</p> -->
                      </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(185, 44, 86); --summarytextcolor: white">
                    <div id="most_crowded_stop_div">
                      <p id="most_crowded_stop_title">MOST CROWDED STOP<br><br>
                        <span id="most_crowded_stop" class="summary_metric">calculating...</span></p>
                      <!-- <p id="most_crowded_stop">Most Crowded Stop</p> -->
                    </div>
                  </div>
            </div>
            <div class="charts-container">
                <div class="charts-row">
                  <div id="scatter_chart_div" class="charts-card"></div>
                  <div id="bar_chart_div" class="charts-card"></div>
                </div>
                <!-- <div class="charts-card">
                  <div id="bar_chart_div"></div>
                </div> -->
                <div class="charts-row">
                  <div id="pie_chart_div" class="charts-card"></div>
                  <div id="column_chart_div" class="charts-card"></div>
                </div>
                <!-- <div class="charts-card">
                  <div id="column_chart_div"></div>
                </div> -->
          </div>
              
        </div>      

        <div class="data-side-bar"></div>
      </div>
  
  <div class="footer-container">
      <p id="footer_tab">1</p>
  </div>
</div>
<script>
    var accord = document.getElementsByClassName('accordion');
    //  console.log(accord[0]);
     var k;

     for (k = 0; k < accord.length; k++) {
       accord[k].addEventListener("click", function() {
         this.classList.toggle("active");
         var panel = this.nextElementSibling;
        //  console.log(panel);
         if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
       });
     }

  function toggle_visibility(id) {
      var e = document.getElementById(id);
      if(e.style.display == 'flex') {
         e.style.display = 'none';
      } else {
         e.style.display = 'flex';
      }
  }

   </script>
</body>
</html>