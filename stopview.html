<html>
  <head>
      <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script>
      var dashboardDate;
      var prevbutton = 'date_today';

      let initialRange = new Date();
      let initialStartDateString = '';
      let initialEndDateString = '';

      initialRange.setDate(initialRange.getDate() - 1);
      initialEndDateString = initialRange.toISOString().slice(0,10);
      initialStartDateString = initialRange.toISOString().slice(0,10);

      function setDashboardDate(dateRange, div_id) {

        document.getElementById(prevbutton).style.backgroundColor = 'white';
        document.getElementById(prevbutton).style.color = 'black';

        prevbutton = div_id;

        document.getElementById(div_id).style.backgroundColor = '#2eacde';
        document.getElementById(div_id).style.color = 'white';

        let selectedRange = new Date();
        let startDateString = '';
        let endDateString = '';

        switch(dateRange) {
          case 'dttoday':
                startDateString = selectedRange.toISOString().slice(0,10);
                endDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtthisweek':
                endDateString = selectedRange.toISOString().slice(0,10);
                selectedRange.setDate(selectedRange.getDate() - 7);
                startDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtthismonth':
                endDateString = selectedRange.toISOString().slice(0,10);
                selectedRange.setDate(selectedRange.getDate() - 30);
                startDateString = selectedRange.toISOString().slice(0,10);
                hideCustomDates();
                break;
          case 'dtcustomdates':
                showCustomDates();
                break;
          default:
        }
        
        document.getElementById('selected_date_range').innerHTML = 'Data since "' + startDateString + '" until "' + endDateString + '"';
        google.charts.setOnLoadCallback(initialize(startDateString, endDateString));
      }

      function showCustomDates() {
        var x = document.getElementById("custom-dates");
        x.style.display = "flex";
        watchDateChange();
      }

      function hideCustomDates() {
        var x = document.getElementById("custom-dates");
        x.style.display = "none";

        document.getElementById('message_for_custom_date').innerHTML = '.';

        stopWatchingDateChange();
      }

      function watchDateChange() {
        document.getElementById("filter_start_date").addEventListener("change", dateListener);

        document.getElementById("filter_end_date").addEventListener("change", dateListener);
      }

      function dateListener() {
            var input = this.value;
            var dateEntered = new Date(input);

            if(input){
              document.getElementById('message_for_custom_date').innerHTML = '.';
            }
      }     

      function stopWatchingDateChange() {
        document.getElementById("filter_start_date").removeEventListener("change", dateListener);

        document.getElementById("filter_end_date").removeEventListener("change", dateListener);
      }

      function customDateSubmitted() {
        var filterStartDate = document.getElementById("filter_start_date").value;
        var filterEndDate = document.getElementById("filter_end_date").value;

        if (!(filterStartDate) || !(filterEndDate)) {
            document.getElementById('message_for_custom_date').innerHTML = "Please select Start and End dates!";
        } 
        else {
          document.getElementById('selected_date_range').innerHTML = 'Data since "' + filterStartDate + '" until "' + filterEndDate + '"';
        google.charts.setOnLoadCallback(initialize(filterStartDate, filterEndDate));        
        }
      }    

      // Load the Visualization API and the corechart package.
      // google.charts.load('current', {'packages':['corechart','table']});
      google.charts.load('current'); //change to load chartwrapper instead of charts

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(initialLoad);

      function initialLoad() {
        document.getElementById('selected_date_range').innerHTML = 'Data since "' + initialStartDateString + '" until "' + initialEndDateString + '"';
        initialize(initialStartDateString, initialEndDateString);
      }

      function initialize(startDate, endDate) {

    // Define the chart using setters:
    var lowrevenuewrap = new google.visualization.ChartWrapper();
    var lowrevenuesql = startDate ? (endDate ? (`select A, MIN(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MIN(E) limit 10`)
                                             : (`select A, MIN(E) where B >= date '${startDate}' group by A order by MIN(E) limit 10`))
                                  : ('select A, MIN(E) group by A order by MIN(E) limit 10');

    lowrevenuewrap.setChartType('ColumnChart');
    lowrevenuewrap.setDataSourceUrl('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1');
    lowrevenuewrap.setContainerId('column_chart_div');
    lowrevenuewrap.setQuery(lowrevenuesql);
    lowrevenuewrap.setOptions({'title': 'Bottom 10 Route Revenue per day',
                               'backgroundColor': '#fafafa','legend':'bottom',});
    lowrevenuewrap.draw();
  
        var opts = {sendMethod: 'auto'};

          var toprevenuewrap = new google.visualization.ChartWrapper();
          var toprevenuesql = startDate ? (endDate ? (`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc limit 10`)
                                                  : (`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc limit 10`))
                                        : ('select A, MAX(E) group by A order by MAX(E) desc limit 10');

          toprevenuewrap.setChartType('PieChart');
          toprevenuewrap.setDataSourceUrl('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1');
          toprevenuewrap.setContainerId('pie_chart_div');
          toprevenuewrap.setQuery(toprevenuesql);
          toprevenuewrap.setOptions({ 'title':'Top 10 Route Revenue per day',
                                      'legend': 'bottom',
                                      'backgroundColor': '#fafafa',
                                      'pieHole': 0.6});
          toprevenuewrap.draw();



          var lowutilizationwrap = new google.visualization.ChartWrapper();
          var lowutilizationsql = startDate ? (endDate ? (`select A, MIN(C) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MIN(C) asc limit 10`)
                                                       : (`select A, MIN(C) where B >= date '${startDate}' group by A order by MIN(C) asc limit 10`))
                                            : ('select A, MIN(C) group by A order by MIN(C) asc limit 10');

          lowutilizationwrap.setChartType('BarChart');
          lowutilizationwrap.setDataSourceUrl('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1');
          lowutilizationwrap.setContainerId('bar_chart_div');
          lowutilizationwrap.setQuery(lowutilizationsql);
          lowutilizationwrap.setOptions({ 'title':'Bottom 10 Bus Utilization per day',
                                          'backgroundColor': '#fafafa','legend':'bottom',});
          lowutilizationwrap.draw();

          var crowdedroutewrap = new google.visualization.ChartWrapper();
          var crowdedroutesql = startDate ? (endDate ? (`select A, MAX(C) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(C) desc limit 10`)
                                                     : (`select A, MAX(C) where B >= date '${startDate}' group by A order by MAX(C) desc limit 10`))
                                          : ('select A, MAX(C) group by A order by MAX(C) desc limit 10');

          crowdedroutewrap.setChartType('ScatterChart');
          crowdedroutewrap.setDataSourceUrl('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1');
          crowdedroutewrap.setContainerId('scatter_chart_div');
          crowdedroutewrap.setQuery(crowdedroutesql);
          crowdedroutewrap.setOptions({ 'title':'Top 10 Crowded Routes per day',
                                          'backgroundColor': '#fafafa','legend':'bottom',});
          crowdedroutewrap.draw();

        var tablequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        startDate ? (endDate ? (tablequery.setQuery(`select A,B,C,D,E where B >= date '${startDate}' and B <= date '${endDate}'`))
                             : tablequery.setQuery(`select A,B,C,D,E where B >= date '${startDate}'`))
                  : tablequery.setQuery('select A,B,C,D,E');

        // // Send the query with a callback function.
        // tablequery.send(handleTableQueryResponse);

        // Replace the data source URL on next line with your data source URL.
        var servicequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);
        
        startDate ? (endDate ? servicequery.setQuery(`select A where B >= date '${startDate}' and B <= date '${endDate}'`)
                             : servicequery.setQuery(`select A where B >= date '${startDate}'`))
                  : servicequery.setQuery('select A');

        // Send the query with a callback function.
        servicequery.send(handleServiceQueryResponse);

        // Replace the data source URL on next line with your data source URL.
        var passengerquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        startDate ? (endDate ? passengerquery.setQuery(`select SUM(C) where B >= date '${startDate}' and B <= date '${endDate}'`)
                             : passengerquery.setQuery(`select SUM(C) where B >= date '${startDate}'`))
                  : passengerquery.setQuery('select SUM(C)');

        // Send the query with a callback function.
        passengerquery.send(handlePassengerQueryResponse);

        var busyroutequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView', opts);

        startDate ? (endDate ? busyroutequery.setQuery(`select A, MAX(C)  where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(C) desc`)
                             : busyroutequery.setQuery(`select A, MAX(C)  where B >= date '${startDate}' group by A order by MAX(C) desc`))
                  : busyroutequery.setQuery('select A, MAX(C) group by A order by MAX(C) desc');

        // Send the query with a callback function.
        busyroutequery.send(handleBusyRouteQueryResponse);

        var crowdedstopquery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=StopView', opts);

        startDate ? (endDate ? crowdedstopquery.setQuery(`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc`)
                             : crowdedstopquery.setQuery(`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc`))
                  : crowdedstopquery.setQuery('select A, MAX(E) group by A order by MAX(E) desc');

        // Send the query with a callback function.
        crowdedstopquery.send(handleCrowdedStopQueryResponse);

        var revenueroutequery = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-WBtaG4oTf8p0ypzWaKemvsKBH3SjTlaOu5dWGXF2v0/edit?usp=sharing&sheet=RouteView&headers=1', opts);

        startDate ? (endDate ? revenueroutequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' and B <= date '${endDate}' group by A order by MAX(E) desc`)
                             : revenueroutequery.setQuery(`select A, MAX(E) where B >= date '${startDate}' group by A order by MAX(E) desc`))
                  : revenueroutequery.setQuery('select A, MAX(E) group by A order by MAX(E) desc');

        // Send the query with a callback function.
        revenueroutequery.send(handleRevenueRouteQueryResponse);

      }

      function numberWithCommas(x) {
        x=x.toString();
        var lastThree = x.substring(x.length-3);
        var otherNumbers = x.substring(0,x.length-3);
        if(otherNumbers != '')
            lastThree = ',' + lastThree;
        var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
        return res;
      }

      function handleQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var options = {'title':'Bottom 10 Route Revenue per day',
                       'backgroundColor': '#fafafa'};

        var data = response.getDataTable();
        var column_chart = new google.visualization.ColumnChart(document.getElementById('column_chart_div'));

        column_chart.draw(data, options);

       }

function handleTopRevenueChart(response) {

      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

      var toprevenueoptions = {'title':'Top 10 Route Revenue per day',
                    'legend': 'left',
                    'backgroundColor': '#fafafa',
                    'pieHole': 0.9};

      var toprevenuedata = response.getDataTable();
      var toprevenuechart = new google.visualization.PieChart(document.getElementById('pie_chart_div'));

      toprevenuechart.draw(toprevenuedata, toprevenueoptions);
}

function handleCrowdedRevenueChart(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var revenuechartoptions = {'title':'Top 10 Crowded Routes per day',
                      'backgroundColor': '#fafafa'};

        var revenuechartdata = response.getDataTable();
        var line_chart = new google.visualization.ScatterChart(document.getElementById('scatter_chart_div'));

        line_chart.draw(revenuechartdata, revenuechartoptions);

}

function handleLowtUtilizationChart(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var lowutilizationoptions = {'title':'Bottom 10 Bus Utilization per day',
                      'backgroundColor': '#fafafa'};

        var lowutilizationdata = response.getDataTable();
        var bar_chart = new google.visualization.BarChart(document.getElementById('bar_chart_div'));

        bar_chart.draw(lowutilizationdata, lowutilizationoptions);
}


function handleTableQueryResponse(response) {
        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }

          var cssClassNames = {
              'headerRow': 'italic-darkblue-font large-font bold-font',
              'tableRow': '',
              'oddTableRow': 'beige-background',
              'selectedTableRow': 'orange-background large-font bold-font',
              'hoverTableRow': '',
              'headerCell': 'gold-border',
              'tableCell': 'center-text',
              'rowNumberCell': 'italic-purple-font',
              'justify': 'center',
          };

      }

      function handleServiceQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var serviceoptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var servicedata = null;
        servicedata = response.getDataTable();
        
        try {
        document.getElementById('routes_in_service').innerHTML = numberWithCommas(servicedata.getDistinctValues(0).length);
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('routes_in_service').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('routes_in_service').innerHTML = 0;
          }
        }
      }

      function handlePassengerQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var passengeroptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var passengerdata = response.getDataTable();

        try {
          document.getElementById('total_passengers').innerHTML = numberWithCommas(passengerdata.getValue(0,0));
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('total_passengers').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('total_passengers').innerHTML = 0;
          }
        }
    }

      function handleCrowdedStopQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var crowdedstopoptions = {'title':'Bus Utilization',
                      'width':250,
                      'height':200};

        var crowdedstopdata = response.getDataTable();

        try {
          document.getElementById('most_crowded_stop').innerHTML = crowdedstopdata.getValue(0,0)
           + '<br><span style="font-size:1vw"}>(# passengers: ' + numberWithCommas(crowdedstopdata.getValue(0,1)) + ')</span>';
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_crowded_stop').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_crowded_stop').innerHTML = 0;
          }
        }
        
      }

      function handleBusyRouteQueryResponse(response) {

          if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
          }
          var busyrouteoptions = {'title':'Bus Utilization',
                        'width':250,
                        'height':200};

          var busyroutedata = response.getDataTable();

        try {
          document.getElementById('most_busy_route').innerHTML = busyroutedata.getValue(0,0);
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_busy_route').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_busy_route').innerHTML = 0;
          }
        }

      }

      function handleRevenueRouteQueryResponse(response) {

          if (response.isError()) {
            alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
            return;
          }
          var revenuerouteoptions = {'title':'Bus Utilization',
                        'width':250,
                        'height':200};

          var revenueroutedata = response.getDataTable();

        try {
          document.getElementById('most_revenue_route').innerHTML = '&#8377;' + numberWithCommas(revenueroutedata.getValue(0,1))
           + '/-<br><span style="font-size:1vw"}>(Route #: ' + revenueroutedata.getValue(0,0) + ')</span>';
        }
        catch(err) {
          switch (err.message) {
            case 'Table has no rows.' :
                  document.getElementById('most_revenue_route').innerHTML = 0  + '/-<br><span style="font-size:18"}>(No data for selected date)</span>';
                  break;
            default :
                  document.getElementById('most_revenue_route').innerHTML = 0;
          }
        }

      }

</script>
<link rel="stylesheet" type="text/css" href="stopview.css"/>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
  <div class="main-container">
      <div class="navbar">
        <a href="googlecharts.html">HOME</a>
        <a href="stopview.html">STOP</a>
        <a href="routeview.html">ROUTE</a>
        <a href="rawdata.html">RAWDATA</a>
        </div>
      <div class="header-container">
            <p id="selected_date_range">Showing All Data</p>
            <div class="btn-group">
                <button id="date_today" class="date-button" onclick="setDashboardDate('dttoday','date_today')"><span>Today</span></button>
                <button id="date_thisweek" class="date-button" onclick="setDashboardDate('dtthisweek','date_thisweek')"><span>Past 7 Days</span></button>
                <button id="date_thismonth" class="date-button" onclick="setDashboardDate('dtthismonth','date_thismonth')"><span>Past 30 days</span></button>
                <button id="date_custom" class="date-button" onclick="setDashboardDate('dtcustomdates','date_custom')"><span>Custom Date Range</span></button>
                <div id="custom-dates" class="custom-dates-container" style="display: none">
                    <div class="date-labels"><Span>Start Date: </Span>
                      <Span>End Date: </Span>
                    </div>
                    <div class="start-end-dates">
                      <input id="filter_start_date" type="date">
                      <input id="filter_end_date" type="date">
                    </div>
                    <div class="submit-date">
                      <span class="date_selection_message" id="message_for_custom_date">.</span>
                      <input id="custom_date_button" type="submit" onclick="customDateSubmitted()" >
                    </div>
                </div>
            </div>

      </div>
        <div class="dashboard-container">
            <div class="data-side-bar"></div>
            
        <div class = "data-container">
        <div class="highlights-container">
                  <div class="summary-card">
                    <div id="total_in_service_div">
                      <p id="routes_in_service_title">ROUTES IN SERVICE<br><br>
                        <span id="routes_in_service" class="summary_metric">calculating...</span></p>
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(3, 88, 109); --summarytextcolor: white">
                    <div id="total_passengers_div">
                      <p id="total_passengers_title">TOTAL PASSENGERS<br><br>
                        <span id="total_passengers" class="summary_metric">calculating...</span></p>
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: greenyellow; --summarytextcolor: black">
                    <div id="most_revenue_route_div">
                      <p id="most_revenue_route_title">MOST REVENUE ROUTE<br><br>
                        <span id="most_revenue_route" class="summary_metric">calculating...</span></p><br><br>
                    </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(124, 30, 93); --summarytextcolor: white">
                      <div id="most_busy_route_div">
                        <p id="most_busy_route_title">MOST BUSY ROUTE<br><br>
                          <span id="most_busy_route" class="summary_metric">calculating...</span></p><br><br>
                      </div>
                  </div>
                  <div class="summary-card" style="--summarybgcolor: rgb(185, 44, 86); --summarytextcolor: white">
                    <div id="most_crowded_stop_div">
                      <p id="most_crowded_stop_title">MOST CROWDED STOP<br><br>
                        <span id="most_crowded_stop" class="summary_metric">calculating...</span></p>
                    </div>
                  </div>
            </div>
            <div class="charts-container">
                <div class="charts-row">
                  <div class="charts-card">
                  <div class="chart-render" id="scatter_chart_div"></div>
                  <p class="chart-text" id="chart-text-id">Top 10 Routes that have carried the most number of passengers in one day, are shown in this scatter chart.</p>
                  </div>
                  <div class="charts-card">
                  <div class="chart-render" id="bar_chart_div"></div>
                  <p class="chart-text" id="chart-text-id">Top 10 Routes that have carried the most number of passengers in one day, are shown in this scatter chart.</p>
                </div>
                </div>
                <div class="charts-row">
                  <div class="charts-card">
                  <div class="chart-render" id="pie_chart_div"></div>
                  <p class="chart-text" id="chart-text-id">Top 10 Routes that have carried the most number of passengers in one day, are shown in this scatter chart.</p>
                </div>
                <div class="charts-card">
                  <div class="chart-render" id="column_chart_div"></div>
                  <p class="chart-text" id="chart-text-id">Top 10 Routes that have carried the most number of passengers in one day, are shown in this scatter chart.</p>
                </div>
                </div>
          </div>
              
        </div>      

        <div class="data-side-bar"></div>
      </div>
  
  <div class="footer-container">
      <p id="footer_tab">1</p>
  </div>
</div>
<script>
    var accord = document.getElementsByClassName('accordion');
     var k;

     for (k = 0; k < accord.length; k++) {
       accord[k].addEventListener("click", function() {
         this.classList.toggle("active");
         var panel = this.nextElementSibling;

         if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
       });
     }

  function toggle_visibility(id) {
      var e = document.getElementById(id);
      if(e.style.display == 'flex') {
         e.style.display = 'none';
      } else {
         e.style.display = 'flex';
      }
  }

   </script>
</body>
</html>